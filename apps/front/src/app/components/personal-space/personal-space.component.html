<ng-container *ngIf="user">
  <h2 class="title">Mon espace</h2>
  <div class="row">
    <div class="col">
      <span class="sub-title">Informations personnelles</span>
      <table class="table">
        <tr>
          <th>
            Prénom :
          </th>
          <td>
            {{user.firstname}}
          </td>
        </tr>
        <tr>
          <th>
            Nom :
          </th>
          <td>
            {{user.lastname}}
          </td>
        </tr>
        <tr>
          <th>
            Département :
          </th>
          <td>
            {{user.district}}
          </td>
        </tr>
        <tr>
          <th>
            Ville :
          </th>
          <td>
            {{user.city}}
          </td>
        </tr>
        <tr>
          <th>
            Email :
          </th>
          <td>
            {{user.email}}
          </td>
        </tr>
        <tr>
          <th>
            Téléphone :
          </th>
          <td>
            {{user.phone}}
          </td>
        </tr>
      </table>

    </div>

    <div class="col">
      <div class="d-flex align-items-center">
        <span class="sub-title">Historique de mes</span>
        <img src="assets/jetons.png" alt="token" width="30" class="token-img">
      </div>
      <div class="d-flex flex-column">
        <span class="user-description">Fortune actuelle : {{ user.tokken }} TokenSwap</span>
        <span class="user-description">Jetons gagnés : </span>
        <span class="user-description">Jetons dépensés : </span>
      </div>
    </div>

      <span class="sub-title alignement">À Propos</span>
      <span><br>{{user.description}}<br></span>

      <a [routerLink]="['/update', user.slug]" class="btn btn-primary mt-3 mb-3 col-4">Modifier mes infos</a>
  </div>



  <div>
    <h2>Mes cours</h2>

    <div>
      <table class="table table-transparent">
        <thead>
          <tr>
            <th>Titre</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody *ngFor="let sheet of sheets">
          <tr *ngIf="sheet.user.id == user.id">
            <td class="align-middle">
              <a class="link-to-sheet" routerLink="/{{ sheet.slug }}">{{
                sheet.title
              }}</a>
            </td>
            <td class="text-center">
              <button
                class="delete-btn m-1"
                (click)="kill('sheets', sheet.slug)"
              >
                Supprimer
              </button>
              <button
                class="delete-btn m-1"
                [routerLink]="['/update', sheet.slug]"
              >
                Modifier
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <h2 class="title toggle-btn">Mes réservations</h2>

    <div>
      <table class="table table-transparent">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Enseignant</th>
            <th>Date</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody *ngFor="let lesson of lessons">
          <tr *ngIf="lesson.user.id == user.id">
            <td class="align-middle">
              <a class="link-to-sheet" routerLink="/{{ lesson.sheet.slug }}">{{
                lesson.sheet.title
              }}</a>
            </td>
            <td class="align-middle booking-text">
              {{ lesson.sheet.user.firstname }}
            </td>
            <td class="align-middle booking-text">
              {{ lesson.bookingDate | date }}
            </td>
            <td class="text-center">
              <button class="delete-btn" (click)="kill('lessons', lesson.id)">
                Annuler ma réservation
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


  <button class="messenger-btn" (click)="gotoMessages(user.slug)">Ma Messagerie</button>
  <button class="update-btn" (click)="kill('users',user.slug,true)">Mettre à jour le compte</button>
  <button class="delete-btn ms-3" (click)="kill('users',user.slug,true)">Supprimer le compte</button>
</ng-container>
