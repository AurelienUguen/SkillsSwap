<ng-container *ngIf="user">
  <h2 class="title">Mon espace</h2>
  <h4>Informations personnelles</h4>
  <div>
    <p>Prénom : {{user.firstname}}</p>
    <p>Nom : {{user.lastname}}</p>
    <p>Email : {{user.email}}</p>
    <a [routerLink]="['/update', user.slug]" class="btn btn-primary">Modifier mes infos</a>
  </div>
  <h4>Ma fortune</h4>
  <p class="user-description"> {{ user.tokken }} TokkenSwap</p>

  <div>
    <h2 class="title toggle-btn" (click)="showMySheets()">Mes cours</h2>

    <div [hidden]="mySheetsToggle">
      <table class="table table-transparent">
        <thead>
          <tr>
            <th>Titre</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody *ngFor="let sheet of sheets">
          <tr *ngIf="sheet.user.id == user.id">
            <td class="align-middle">
              <a class="link-to-sheet" routerLink="/{{ sheet.slug }}">{{
                sheet.title
              }}</a>
            </td>
            <td class="text-center">
              <button
                class="delete-btn m-1"
                (click)="kill('sheets', sheet.slug)"
              >
                Supprimer
              </button>
              <button
                class="delete-btn m-1"
                [routerLink]="['/add-sheet', sheet.slug]"
              >
                Modifier
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <h2 class="title toggle-btn" (click)="showMyLessons()">Mes réservations</h2>

    <div [hidden]="myLessonsToggle">
      <table class="table table-transparent">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Enseignant</th>
            <th>Date</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody *ngFor="let lesson of lessons">
          <tr *ngIf="lesson.user.id == user.id">
            <td class="align-middle">
              <a class="link-to-sheet" routerLink="/{{ lesson.sheet.slug }}">{{
                lesson.sheet.title
              }}</a>
            </td>
            <td class="align-middle booking-text">
              {{ lesson.sheet.user.firstname }}
            </td>
            <td class="align-middle booking-text">
              {{ lesson.bookingDate | date }}
            </td>
            <td class="text-center">
              <button class="delete-btn" (click)="kill('lessons', lesson.id)">
                Annuler ma réservation
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


  <button class="messenger-btn" >Ma Messagerie</button>
  <button class="update-btn" (click)="kill('users',user.slug,true)">Mettre à jour le compte</button>
  <button class="delete-btn ms-3" (click)="kill('users',user.slug,true)">Supprimer le compte</button>
</ng-container>
